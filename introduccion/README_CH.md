# C++ 编程基础：核心概念

## 目录
1. [结构体 (struct)](#结构体)
2. [一维数组](#数组)
3. [函数](#函数)
4. [变量和作用域](#变量)
5. [控制结构](#控制)
6. [最佳实践](#实践)

## 结构体 (struct) {#结构体}

结构体是复合数据类型，允许在同一个名称下组织不同类型的元素。

### 结构体特点

- 允许创建自定义数据类型
- 可以包含不同类型的数据
- 结构体内的元素称为成员
- 可以使用点操作符(.)访问每个成员

### 基本语法

```cpp
struct 结构体名称 {
    类型1 成员1;
    类型2 成员2;
    类型3 成员3;
};
```

### 使用示例

```cpp
struct Person {
    string name;
    int age;
    double height;
};

// 创建Person类型的变量
Person person1;
person1.name = "张三";
person1.age = 25;
person1.height = 1.65;

// 直接初始化
Person person2 = {"李四", 30, 1.75};
```

## 一维数组 {#数组}

数组是一种数据结构，可以在连续的内存位置存储相同类型的多个元素。

### 数组特点

- 在声明时确定固定大小
- 索引从0开始
- 元素类型相同
- 通过索引直接访问元素

### 声明和使用

```cpp
// 声明
类型 数组名[大小];

// 示例
int numbers[5] = {1, 2, 3, 4, 5};
int values[3];  // 未初始化

// 访问元素
numbers[0] = 10;  // 修改第一个元素
int x = numbers[1];  // 获取第二个元素
```

### 结构体数组
```cpp
struct Product {
    string name;
    double price;
};

Product inventory[100];  // 100个产品的数组
inventory[0].name = "笔记本电脑";
inventory[0].price = 999.99;
```

### 遍历数组
```cpp
// 使用for循环
for (int i = 0; i < 5; i++) {
    cout << numbers[i] << " ";
}

// 遍历结构体数组
for (int i = 0; i < 100; i++) {
    cout << inventory[i].name << ": ￥";
    cout << inventory[i].price << endl;
}
```

## 函数 {#函数}

函数是执行特定任务的可重用代码块。

### 函数类型

#### 无返回值函数 (void)
```cpp
void 问候() {
    cout << "你好，世界！" << endl;
}
```

#### 有返回值函数
```cpp
int 求和(int a, int b) {
    return a + b;
}
```

### 参数传递

#### 值传递
```cpp
void 修改数字(int x) {
    x = x + 1;  // 不会修改原始变量
}
```

#### 引用传递
```cpp
void 修改数字(int& x) {
    x = x + 1;  // 会修改原始变量
}
```

### 数组作为函数参数
```cpp
void 显示数组(int arr[], int 大小) {
    for (int i = 0; i < 大小; i++) {
        cout << arr[i] << " ";
    }
}
```

## 变量和作用域 {#变量}

### 全局变量

- 在所有函数外部声明
- 在程序的任何地方都可访问
- 应适度使用

```cpp
int 全局变量 = 10;  // 全局变量

void 函数() {
    全局变量++;  // 访问全局变量
}
```

### 局部变量

- 在函数或代码块内声明
- 仅在其声明的块内可访问
- 优先于全局变量使用

```cpp
void 函数() {
    int 局部变量 = 5;  // 只在函数()内存在
}
```

### 常量

```cpp
const int 最大元素数 = 100;  // 全局常量
const double 圆周率 = 3.14159;
```

## 控制结构 {#控制}

### switch 结构

```cpp
switch (表达式) {
    case 值1:
        // 代码
        break;
    case 值2:
        // 代码
        break;
    default:
        // 默认代码
}
```

### 循环

#### for 循环
```cpp
for (int i = 0; i < 10; i++) {
    cout << i << " ";
}
```

#### while 循环
```cpp
int i = 0;
while (i < 10) {
    cout << i << " ";
    i++;
}
```

#### do-while 循环
```cpp
int 选项;
do {
    cout << "菜单：\n";
    cout << "1. 选项1\n";
    cout << "2. 退出\n";
    cin >> 选项;
} while (选项 != 2);
```

## 最佳实践 {#实践}

### 命名规范
- 使用描述性名称
- 保持一致的命名规范
- 避免单字母命名（循环变量除外）

### 代码组织
- 保持函数简短且单一用途
- 相关代码组织在一起
- 为复杂代码添加注释

### 错误处理
- 验证用户输入
- 检查数组索引
- 处理特殊情况

### 缩进和格式
- 使用一致的缩进
- 在运算符之间留空格
- 一致地使用大括号

### 文档注释
```cpp
/**
 * 函数描述
 * @param 参数1 参数1的描述
 * @return 返回值的描述
 */
类型 函数(类型 参数1) {
    // 代码
}
```

### 调试技巧
1. 使用cout进行调试
2. 验证边界值
3. 测试特殊情况
4. 将大问题分解为小部分

# 图书馆管理系统

本示例实现了一个基础的图书馆借阅管理系统。系统允许注册图书、用户和借阅记录，并生成基本统计数据。

## 使用的结构体

### 图书结构体
```cpp
struct 图书 {
    string 书名;
    string 作者;
    int 出版年份;
    bool 是否可借;
    int 借出次数;
};
```

### 用户结构体
```cpp
struct 用户 {
    string 姓名;
    string 编号;
    int 已借书数;
    bool 是否激活;
};
```

## 全局变量
```cpp
const int 最大图书数 = 100;
const int 最大用户数 = 50;

图书 图书馆[最大图书数];
用户 用户列表[最大用户数];
int 总图书数 = 0;
int 总用户数 = 0;
```

## 主要功能

### 图书登记
```cpp
void 登记图书() {
    if (总图书数 >= 最大图书数) {
        cout << "图书馆已满" << endl;
        return;
    }

    图书 新图书;
    cout << "输入书名：";
    cin.ignore();
    getline(cin, 新图书.书名);
    
    cout << "输入作者：";
    getline(cin, 新图书.作者);
    
    cout << "输入出版年份：";
    cin >> 新图书.出版年份;
    
    新图书.是否可借 = true;
    新图书.借出次数 = 0;
    
    图书馆[总图书数] = 新图书;
    总图书数++;
    
    cout << "图书登记成功" << endl;
}
```

### 用户注册
```cpp
void 注册用户() {
    if (总用户数 >= 最大用户数) {
        cout << "无法注册更多用户" << endl;
        return;
    }

    用户 新用户;
    cout << "输入姓名：";
    cin.ignore();
    getline(cin, 新用户.姓名);
    
    cout << "输入编号：";
    getline(cin, 新用户.编号);
    
    新用户.已借书数 = 0;
    新用户.是否激活 = true;
    
    用户列表[总用户数] = 新用户;
    总用户数++;
    
    cout << "用户注册成功" << endl;
}
```

### 借书
```cpp
void 借书() {
    string 用户编号, 图书名称;
    
    cout << "输入用户编号：";
    cin.ignore();
    getline(cin, 用户编号);
    
    // 查找用户
    int 用户索引 = -1;
    for (int i = 0; i < 总用户数; i++) {
        if (用户列表[i].编号 == 用户编号 && 用户列表[i].是否激活) {
            用户索引 = i;
            break;
        }
    }
    
    if (用户索引 == -1) {
        cout << "用户不存在或未激活" << endl;
        return;
    }
    
    cout << "输入图书名称：";
    getline(cin, 图书名称);
    
    // 查找图书
    int 图书索引 = -1;
    for (int i = 0; i < 总图书数; i++) {
        if (图书馆[i].书名 == 图书名称 && 图书馆[i].是否可借) {
            图书索引 = i;
            break;
        }
    }
    
    if (图书索引 == -1) {
        cout << "图书不存在或不可借" << endl;
        return;
    }
    
    // 执行借书
    图书馆[图书索引].是否可借 = false;
    图书馆[图书索引].借出次数++;
    用户列表[用户索引].已借书数++;
    
    cout << "借书成功" << endl;
}
```

### 图书馆统计
```cpp
void 显示统计信息() {
    // 最受欢迎的图书
    int 最大借出次数 = 0;
    string 最受欢迎图书;
    
    for (int i = 0; i < 总图书数; i++) {
        if (图书馆[i].借出次数 > 最大借出次数) {
            最大借出次数 = 图书馆[i].借出次数;
            最受欢迎图书 = 图书馆[i].书名;
        }
    }
    
    // 可借图书数量
    int 可借图书数 = 0;
    for (int i = 0; i < 总图书数; i++) {
        if (图书馆[i].是否可借) {
            可借图书数++;
        }
    }
    
    // 借书最多的用户
    int 最多借书数 = 0;
    string 最多借书用户;
    
    for (int i = 0; i < 总用户数; i++) {
        if (用户列表[i].已借书数 > 最多借书数) {
            最多借书数 = 用户列表[i].已借书数;
            最多借书用户 = 用户列表[i].姓名;
        }
    }
    
    cout << "\n=== 图书馆统计信息 ===" << endl;
    cout << "最受欢迎的图书：" << 最受欢迎图书 << " (" << 最大借出次数 << " 次)" << endl;
    cout << "可借图书数量：" << 可借图书数 << " / " << 总图书数 << endl;
    cout << "借书最多的用户：" << 最多借书用户 << " (" << 最多借书数 << " 本)" << endl;
}
```

### 主菜单
```cpp
int main() {
    int 选项;
    
    do {
        cout << "\n=== 图书馆管理系统 ===" << endl;
        cout << "1. 登记图书" << endl;
        cout << "2. 注册用户" << endl;
        cout << "3. 借书" << endl;
        cout << "4. 查看统计" << endl;
        cout << "5. 退出" << endl;
        cout << "请选择操作：";
        cin >> 选项;
        
        switch (选项) {
            case 1:
                登记图书();
                break;
            case 2:
                注册用户();
                break;
            case 3:
                借书();
                break;
            case 4:
                显示统计信息();
                break;
            case 5:
                cout << "谢谢使用！" << endl;
                break;
            default:
                cout << "无效选项" << endl;
        }
    } while (选项 != 5);
    
    return 0;
}
```

## 演示的概念

1. **结构体**：
   - 图书和用户结构体的使用
   - 结构体中不同类型字段的使用

2. **数组**：
   - 结构
